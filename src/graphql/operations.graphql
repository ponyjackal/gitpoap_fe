query getAllStats {
  totalContributors
  lastMonthContributors
  totalClaims
  lastMonthClaims
  totalRepos
  lastMonthRepos
}

query leaders($count: Float!) {
  mostHonoredContributors(count: $count) {
    profile {
      address
      id
    }
    claimsCount
  }
}

query repoLeaders($count: Float!, $repoId: Float!) {
  repoMostHonoredContributors(count: $count, repoId: $repoId) {
    profile {
      address
      id
    }
    claimsCount
  }
}

query gitpoapByPoapEventId($poapEventId: Int!) {
  gitPOAP(where: { poapEventId: $poapEventId }) {
    id
    poapEventId
    status
    repo {
      name
    }
  }
}

query gitPOAPHolders($gitPOAPId: Float!, $page: Float, $perPage: Float, $sort: String) {
  gitPOAPHolders(gitPOAPId: $gitPOAPId, page: $page, perPage: $perPage, sort: $sort) {
    totalHolders
    holders {
      address
      githubHandle
      gitPOAPCount
      profileId
      bio
      personalSiteUrl
      twitterHandle
    }
  }
}

query mostClaimedGitPoaps($count: Float!) {
  mostClaimedGitPOAPs(count: $count) {
    claimsCount
    gitPOAP {
      id
      repo {
        id
        name
      }
    }
    event {
      name
      image_url
    }
  }
}

query profile($address: String!) {
  profileData(address: $address) {
    id
    bio
    name
    githubHandle
    twitterHandle
    personalSiteUrl
    address
    ensName
  }
}

query searchForString($text: String!) {
  search(text: $text) {
    profilesByAddress {
      id
      address
    }
    profileByENS {
      profile {
        id
        address
      }
      ens
    }
  }
}

query gitPoaps($address: String!, $sort: String, $page: Float, $perPage: Float) {
  userPOAPs(address: $address, sort: $sort, page: $page, perPage: $perPage) {
    totalGitPOAPs
    gitPOAPs {
      claim {
        gitPOAP {
          id
          repo {
            name
            organization {
              name
            }
          }
        }
        status
        poapTokenId
      }
      event {
        name
        image_url
        description
      }
    }
  }
}

query repoGitPoaps($repoId: Float!, $sort: String, $page: Float, $perPage: Float) {
  repoGitPOAPs(repoId: $repoId, sort: $sort, page: $page, perPage: $perPage) {
    totalGitPOAPs
    gitPOAPs {
      gitPOAP {
        id
        repo {
          name
        }
      }
      event {
        name
        image_url
        description
      }
    }
  }
}

query openClaims($githubId: Float!) {
  userClaims(githubId: $githubId) {
    claim {
      id
      gitPOAP {
        id
        repo {
          organization {
            name
          }
        }
      }
    }
    event {
      name
      image_url
      description
    }
  }
}

query recentRepos($count: Float!) {
  recentlyAddedProjects(count: $count) {
    id
    name
    createdAt
    organization {
      name
    }
  }
}

query gitPoapEvent($id: Float!) {
  gitPOAPEvent(id: $id) {
    gitPOAP {
      repo {
        id
        name
        organization {
          id
          name
          description
          twitterHandle
          url
        }
      }
    }
    event {
      name
      image_url
      description
    }
  }
}

query allPoaps($address: String!, $sort: String, $page: Float, $perPage: Float) {
  userPOAPs(address: $address, sort: $sort, page: $page, perPage: $perPage) {
    totalPOAPs
    poaps {
      event {
        id
        name
        image_url
      }
      tokenId
    }
  }
}

query featuredPoaps($address: String!) {
  profileFeaturedPOAPs(address: $address) {
    gitPOAPs {
      claim {
        id
        gitPOAP {
          id
          repo {
            name
            organization {
              name
            }
          }
        }
      }
      poap {
        event {
          id
          image_url
          name
          description
        }
        tokenId
      }
    }
    poaps {
      event {
        id
        name
        description
        image_url
      }
      tokenId
    }
  }
}

query adminClaims($count: Int!) {
  claims(take: $count, orderBy: { mintedAt: desc }, where: { status: { equals: CLAIMED } }) {
    id
    user {
      id
      githubHandle
    }
    status
    poapTokenId
    address
    updatedAt
    createdAt
    mintedAt
    gitPOAP {
      id
      year
      repo {
        id
        name
        organization {
          id
          name
        }
      }
    }
  }
}

query repoDataById($repoId: Float!) {
  repoData(repoId: $repoId) {
    id
    name
    githubRepoId
    organization {
      id
      name
      description
      twitterHandle
      url
    }
    gitPOAPs {
      id
    }
    contributorCount
    mintedGitPOAPCount
  }
}

query repoDataByName($orgName: String!, $repoName: String!) {
  repoData(orgName: $orgName, repoName: $repoName) {
    id
    name
    githubRepoId
    organization {
      id
      name
      description
      twitterHandle
      url
    }
    gitPOAPs {
      id
    }
    contributorCount
    mintedGitPOAPCount
  }
}

query repoStarCount($repoId: Float!) {
  repoStarCount(repoId: $repoId)
}

query allRepos($count: Int!) {
  repos(take: $count, orderBy: { createdAt: desc }) {
    id
    name
    organization {
      name
    }
    createdAt
    gitPOAPs {
      id
    }
  }
}

# Query primarily used on the Repos page
query allReposOnRepoPage($sort: String, $page: Float, $perPage: Float) {
  allRepos(sort: $sort, page: $page, perPage: $perPage) {
    id
    name
    githubRepoId
    # claimCount - use once backend changes are in
    # uniqueContributorCount - use once backend changes are in
    organization {
      name
    }
    gitPOAPs {
      id
    }
  }
}

query organizationDataById($orgId: Float!) {
  organizationData(orgId: $orgId) {
    id
    name
    description
    twitterHandle
    url
    contributorCount
    gitPOAPCount
    mintedGitPOAPCount
    projectCount
  }
}

query organizationDataByName($orgName: String!) {
  organizationData(orgName: $orgName) {
    id
    name
    description
    twitterHandle
    url
    contributorCount
    gitPOAPCount
    mintedGitPOAPCount
    projectCount
  }
}

query organizationsList($sort: String, $page: Float, $perPage: Float) {
  allOrganizations(sort: $sort, page: $page, perPage: $perPage) {
    id
    name
    githubOrgId
    repos {
      id
      gitPOAPs {
        id
      }
    }
  }
}

query organizationRepos($orgId: Float!, $sort: String, $page: Float, $perPage: Float) {
  organizationRepos(orgId: $orgId, sort: $sort, page: $page, perPage: $perPage) {
    id
    name
    contributorCount
    mintedGitPOAPCount
  }
}

query totalRepoCount {
  totalRepos
}

query claimsSince($date: DateTime) {
  claims(where: { status: { equals: CLAIMED }, mintedAt: { gt: $date } }) {
    id
  }
}

query reposSince($date: DateTime) {
  repos(where: { createdAt: { gt: $date } }) {
    id
  }
}

query gitPOAPsSince($date: DateTime) {
  gitPOAPS(where: { createdAt: { gt: $date } }) {
    id
  }
}

query profilesSince($date: DateTime) {
  profiles(where: { createdAt: { gt: $date } }) {
    id
  }
}

query orgsSince($date: DateTime) {
  organizations(where: { createdAt: { gt: $date } }) {
    id
  }
}
